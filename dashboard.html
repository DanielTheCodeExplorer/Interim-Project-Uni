<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nigeria Network Lab · Evaluation</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-1: #050d0b;
      --bg-2: #0c1725;
      --panel: #0c1525;
      --panel-edge: #12312a;
      --accent: #6a2ddc;
      --pulse: #70f0c2;
      --text: #e3f1ea;
      --muted: #9ab3a8;
      --danger: #f08ba5;
      --warn: #f0b33a;
      --border: rgba(255, 255, 255, 0.08);
      --card: rgba(12, 21, 37, 0.9);
      --card-edge: rgba(112, 240, 194, 0.08);
      --card-edge-2: rgba(106, 45, 220, 0.08);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      font-family: 'Space Grotesk', system-ui, -apple-system, sans-serif;
      color: var(--text);
      background:
        radial-gradient(circle at 20% 20%, rgba(112, 240, 194, 0.08), transparent 36%),
        radial-gradient(circle at 80% 30%, rgba(106, 45, 220, 0.12), transparent 28%),
        linear-gradient(145deg, var(--bg-1), var(--bg-2));
      padding: 24px 14px 48px;
      display: flex;
      justify-content: center;
    }
    .app {
      position: relative;
      z-index: 1;
      width: min(1100px, 100%);
      margin: 0 auto;
      display: grid;
      gap: 14px;
    }
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-top: 12px;
    }
    .hero-title { margin: 0; font-size: 1.7rem; letter-spacing: 0.4px; }
    .hero-sub { margin: 4px 0 0; color: var(--muted); font-size: 0.96rem; }
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 18px;
      position: relative;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.55);
      overflow: hidden;
    }
    .card::before, .card::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      border: 1px solid var(--card-edge);
      pointer-events: none;
    }
    .card::after { inset: 10px; border: 1px solid var(--card-edge-2); }
    .card.accent-impact {
      background: linear-gradient(135deg, rgba(112, 240, 194, 0.12), rgba(12, 21, 37, 0.9));
      border-color: rgba(112, 240, 194, 0.35);
    }
    .card.accent-risk {
      background: linear-gradient(135deg, rgba(240, 139, 165, 0.1), rgba(12, 21, 37, 0.9));
      border-color: rgba(240, 139, 165, 0.35);
    }
    .card.accent-tradeoff {
      background: linear-gradient(135deg, rgba(106, 45, 220, 0.12), rgba(12, 21, 37, 0.9));
      border-color: rgba(106, 45, 220, 0.35);
    }
    .score-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 10px; }
    .score h4 { margin: 0 0 8px; color: var(--muted); font-weight: 600; letter-spacing: 0.2px; }
    .score .value { font-size: 1.9rem; font-weight: 700; margin: 0; }
    .pill { padding: 6px 10px; border-radius: 10px; background: rgba(112, 240, 194, 0.12); color: var(--pulse); border: 1px solid rgba(112, 240, 194, 0.25); font-size: 0.86rem; }
    .pill.danger { background: rgba(240, 139, 165, 0.12); color: var(--danger); border-color: rgba(240, 139, 165, 0.25); }
    .pill.warn { background: rgba(240, 179, 58, 0.12); color: var(--warn); border-color: rgba(240, 179, 58, 0.25); }
    .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; }
    .list { list-style: none; padding: 0; margin: 0; display: grid; gap: 8px; }
    .list li {
      padding: 14px;
      border-radius: 14px;
      border: 1px solid rgba(112, 240, 194, 0.35);
      background: linear-gradient(120deg, rgba(112, 240, 194, 0.14), rgba(12, 21, 37, 0.95));
      color: var(--text);
      font-size: 0.98rem;
      display: grid;
      gap: 6px;
      border-left: 4px solid rgba(112, 240, 194, 0.7);
    }
    .two-col { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 10px; }
    table { width: 100%; border-collapse: collapse; font-size: 0.95rem; }
    th, td { padding: 10px 12px; border-bottom: 1px solid rgba(255, 255, 255, 0.05); text-align: left; vertical-align: top; }
    th { color: var(--muted); font-weight: 600; font-size: 0.9rem; letter-spacing: 0.1px; }
    tr:last-child td { border-bottom: none; }
    .tradeoff-table td:first-child { color: var(--pulse); font-weight: 600; }
    .tradeoff-table td { background: rgba(255,255,255,0.015); }
    .mini { color: var(--muted); font-size: 0.9rem; margin-top: 4px; }
    .note { color: var(--muted); font-size: 0.95rem; line-height: 1.5; }
    .tone-good { color: var(--pulse); }
    .tone-warn { color: var(--warn); }
    .tone-bad { color: var(--danger); }
    @media (max-width: 540px) { .topbar { flex-direction: column; align-items: flex-start; } }
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div>
        <h1 class="hero-title">Nigeria Network Evaluation</h1>
        <p class="hero-sub">Post-design quality, impact, and risk review</p>
      </div>
      <div class="pill" aria-hidden="true">Evaluation only</div>
    </div>

    <div class="card">
      <h3 style="margin-top:0;">Evaluation Metrics</h3>
      <div class="score-grid">
        <div class="score">
          <h4>Avg Wi‑Fi speed</h4>
          <p class="value"><span id="score-overall">--</span> <small>Mbps</small></p>
          <p class="mini" id="score-overall-note"></p>
        </div>
        <div class="score">
          <h4>Cost per covered person</h4>
          <p class="value">₦<span id="score-cost">--</span><small>k</small></p>
          <p class="mini" id="score-cost-note"></p>
        </div>
        <div class="score">
          <h4>Coverage achieved</h4>
          <p class="value"><span id="score-coverage">--</span>%</p>
          <p class="mini" id="score-coverage-note"></p>
        </div>
        <div class="score">
          <h4>Resilience readiness</h4>
          <p class="value"><span id="score-resilience">--</span>%</p>
          <p class="mini" id="score-resilience-note"></p>
        </div>
      </div>
    </div>

    <div class="two-col">
      <div class="card">
        <h3 style="margin-top:0;">Outcome KPIs</h3>
        <div class="kpi-grid">
          <div class="score">
            <h4>National coverage</h4>
            <p class="value"><span id="kpi-coverage">--</span>%</p>
            <p class="mini" id="kpi-coverage-note"></p>
          </div>
          <div class="score">
            <h4>Avg Wi‑Fi speed</h4>
            <p class="value"><span id="kpi-speed">--</span> Mbps</p>
            <p class="mini">Urban anchors driving speed uplift.</p>
          </div>
          <div class="score">
            <h4>Total cost</h4>
            <p class="value">₦<span id="kpi-cost">--</span>B</p>
            <p class="mini" id="kpi-cost-note"></p>
          </div>
          <div class="score">
            <h4>Completion timeline</h4>
            <p class="value"><span id="kpi-time">--</span> months</p>
            <p class="mini">Aligned to staged rollout.</p>
          </div>
        </div>
      </div>

      <div class="card accent-impact">
        <h3 style="margin-top:0;">Impact Translation</h3>
        <ul class="list" id="impact-list"></ul>
      </div>
    </div>

    <div class="two-col">
      <div class="card accent-risk">
        <h3 style="margin-top:0;">Risks & Weaknesses</h3>
        <ul class="list" id="risk-list"></ul>
      </div>
      <div class="card accent-tradeoff">
        <h3 style="margin-top:0;">Trade-offs</h3>
        <table class="tradeoff-table">
          <thead>
            <tr><th>Dimension</th><th>Observation</th><th>Impact</th></tr>
          </thead>
          <tbody id="tradeoff-table"></tbody>
        </table>
      </div>
    </div>

    <div class="card">
      <h3 style="margin-top:0;">Compliance Checks</h3>
      <div class="score-grid">
        <div class="score">
          <h4>Broadband target met?</h4>
          <p class="value" id="compliance-coverage">--</p>
          <p class="mini">≥ 85% national coverage required.</p>
        </div>
        <div class="score">
          <h4>Within budget?</h4>
          <p class="value" id="compliance-budget">--</p>
          <p class="mini" id="compliance-budget-note"></p>
        </div>
        <div class="score">
          <h4>Timeline acceptable?</h4>
          <p class="value" id="compliance-time">--</p>
          <p class="mini" id="compliance-time-note"></p>
        </div>
      </div>
    </div>

    <div class="card">
      <h3 style="margin-top:0;">AI Justification</h3>
      <p class="note" id="ai-summary"></p>
    </div>
  </div>
  <script>
    const dataset = {
      nigeria_total_connectivity: {
        design_id: 1,
        avg_national_speed_mbps: 143.4,
        national_coverage: 89.3,
        predicted_total_cost: 171.8,
        predicted_total_completion_months: 14
      },
      places: [
        { place_id: 1, state: 'Lagos', city_town: 'Lagos', lat: 6.5244, lon: 3.3792, population: 14862111 },
        { place_id: 2, state: 'FCT', city_town: 'Abuja', lat: 9.0765, lon: 7.3986, population: 3626000 },
        { place_id: 3, state: 'Kano', city_town: 'Kano', lat: 12.0022, lon: 8.5919, population: 4040000 },
        { place_id: 4, state: 'Rivers', city_town: 'Port Harcourt', lat: 4.8156, lon: 7.0498, population: 1860000 },
        { place_id: 5, state: 'Kaduna', city_town: 'Kaduna', lat: 10.5105, lon: 7.4165, population: 1650000 },
        { place_id: 6, state: 'Enugu', city_town: 'Enugu', lat: 6.5244, lon: 7.5179, population: 820000 },
        { place_id: 7, state: 'Borno', city_town: 'Maiduguri', lat: 11.8311, lon: 13.1510, population: 1200000 }
      ],
      place_connectivity: [
        { design_id: 1, place_id: 1, avg_speed_mbps: 178.2, coverage: 0.972, estimated_cost: 45.8, predicted_completion_months: 10 },
        { design_id: 1, place_id: 2, avg_speed_mbps: 165.8, coverage: 0.946, estimated_cost: 52.3, predicted_completion_months: 12 },
        { design_id: 1, place_id: 3, avg_speed_mbps: 98.3, coverage: 0.789, estimated_cost: 38.5, predicted_completion_months: 18 },
        { design_id: 1, place_id: 4, avg_speed_mbps: 118.5, coverage: 0.864, estimated_cost: 35.2, predicted_completion_months: 14 },
        { design_id: 1, place_id: 5, avg_speed_mbps: 126.8, coverage: 0.815, estimated_cost: 30.6, predicted_completion_months: 13 },
        { design_id: 1, place_id: 6, avg_speed_mbps: 132.1, coverage: 0.904, estimated_cost: 27.5, predicted_completion_months: 11 },
        { design_id: 1, place_id: 7, avg_speed_mbps: 76.4, coverage: 0.622, estimated_cost: 29.1, predicted_completion_months: 20 }
      ],
      place_constraints: [
        { constraint_id: 801, place_id: 3, terrain_type: 'Semi-arid', flood_risk: 'Low', security_risk: 'Medium', regulatory_difficulty: 'Medium', ai_advice: 'Stagger builds; prioritize backhaul hardening and solar redundancy.' },
        { constraint_id: 802, place_id: 4, terrain_type: 'Coastal', flood_risk: 'High', security_risk: 'Low', regulatory_difficulty: 'Low', ai_advice: 'Elevate cabinets; dual power feeds; add coastal redundancy toward Bayelsa.' },
        { constraint_id: 803, place_id: 7, terrain_type: 'Sahel', flood_risk: 'Low', security_risk: 'High', regulatory_difficulty: 'High', ai_advice: 'Partner with local ISPs; rely on microwave rings with tamper alerts.' },
        { constraint_id: 804, place_id: 6, terrain_type: 'Urban hills', flood_risk: 'Medium', security_risk: 'Low', regulatory_difficulty: 'Medium', ai_advice: 'Use short-radius 5G; add densification near CBD to reach 95% coverage.' }
      ]
    };

    const placeById = Object.fromEntries(dataset.places.map(p => [p.place_id, p]));

    function formatCostB(value) {
      return value.toLocaleString('en-NG', { minimumFractionDigits: 1, maximumFractionDigits: 1 });
    }

    function setTone(id, tone) {
      const el = document.getElementById(id);
      if (!el) return;
      el.classList.remove('tone-good', 'tone-warn', 'tone-bad');
      if (tone) el.classList.add(tone);
    }

    function toneForScore(val) {
      if (val >= 85) return 'tone-good';
      if (val >= 70) return 'tone-warn';
      return 'tone-bad';
    }

    function calcReach() {
      const totalPop = dataset.places.reduce((acc, p) => acc + p.population, 0);
      return Math.round(totalPop * dataset.nigeria_total_connectivity.national_coverage / 100);
    }

    function renderScores() {
      const reach = calcReach();
      const { national_coverage, predicted_total_cost, avg_national_speed_mbps } = dataset.nigeria_total_connectivity;
      const costPerPerson = reach ? (predicted_total_cost * 1_000_000_000) / reach : 0;
      const costPerPersonK = costPerPerson / 1000;
      const resilienceScore = Math.max(50, Math.min(95, 95 - dataset.place_constraints.length * 5));

      document.getElementById('score-overall').textContent = avg_national_speed_mbps.toFixed(0);
      document.getElementById('score-overall-note').textContent = 'Average delivered Wi‑Fi speed.';
      setTone('score-overall', avg_national_speed_mbps >= 140 ? 'tone-good' : 'tone-warn');

      document.getElementById('score-cost').textContent = costPerPersonK.toFixed(1);
      document.getElementById('score-cost-note').textContent = '₦k per person covered (lower is better).';
      setTone('score-cost', costPerPersonK <= 7 ? 'tone-good' : costPerPersonK <= 9 ? 'tone-warn' : 'tone-bad');

      document.getElementById('score-coverage').textContent = national_coverage.toFixed(1);
      document.getElementById('score-coverage-note').textContent = 'Share of Nigeria reached by this design.';
      setTone('score-coverage', national_coverage >= 90 ? 'tone-good' : national_coverage >= 85 ? 'tone-warn' : 'tone-bad');

      document.getElementById('score-resilience').textContent = resilienceScore;
      document.getElementById('score-resilience-note').textContent = 'Higher means fewer terrain/security weak spots.';
      setTone('score-resilience', toneForScore(resilienceScore));
    }

    function renderKPIs() {
      const { national_coverage, avg_national_speed_mbps, predicted_total_cost, predicted_total_completion_months } = dataset.nigeria_total_connectivity;
      document.getElementById('kpi-coverage').textContent = national_coverage.toFixed(1);
      document.getElementById('kpi-coverage-note').textContent = national_coverage >= 85 ? 'Above broadband target.' : 'Below national target.';
      setTone('kpi-coverage', national_coverage >= 85 ? 'tone-good' : 'tone-warn');
      document.getElementById('kpi-speed').textContent = avg_national_speed_mbps.toFixed(1);
      document.getElementById('kpi-cost').textContent = formatCostB(predicted_total_cost);
      document.getElementById('kpi-cost-note').textContent = predicted_total_cost <= 180 ? 'Within advisory cap.' : 'Exceeds advisory cap.';
      setTone('kpi-cost', predicted_total_cost <= 180 ? 'tone-good' : 'tone-bad');
      document.getElementById('kpi-time').textContent = predicted_total_completion_months;
      setTone('kpi-time', predicted_total_completion_months <= 15 ? 'tone-good' : 'tone-warn');
    }

    function renderImpact() {
      const reachedPop = calcReach();
      const impactList = document.getElementById('impact-list');
      const items = [
        { label: 'Coverage reach', text: `~${reachedPop.toLocaleString()} people nationwide benefit from planned coverage.` },
        { label: 'Speed uplift', text: `~${dataset.nigeria_total_connectivity.avg_national_speed_mbps.toFixed(0)} Mbps avg enables SME/cloud adoption in Lagos, Abuja, Port Harcourt.` },
        { label: 'Delay cost', text: `Each slipped quarter could forfeit ~₦18B in productivity (estimate).` },
      ];
      impactList.innerHTML = items.map(item => `
        <li>
          <strong>${item.label}</strong>
          <span class="mini">${item.text}</span>
        </li>
      `).join('');
    }

    function renderRisks() {
      const riskList = document.getElementById('risk-list');
      const hotspots = dataset.place_constraints.map(c => placeById[c.place_id].city_town);
      const items = [
        { label: 'Under-threshold regions', text: `Kano (${Math.round(dataset.place_connectivity[2].coverage * 100)}%), Maiduguri (${Math.round(dataset.place_connectivity[6].coverage * 100)}%).` },
        { label: 'Terrain / security', text: `${hotspots.join(', ')} need hardened backhaul, flood mitigation, and security escorts.` },
        { label: 'Bottlenecks', text: `Microwave backhaul (Kano) and coastal fiber (Port Harcourt) drive resilience risk.` },
      ];
      riskList.innerHTML = items.map(item => `
        <li>
          <strong>${item.label}</strong>
          <span class="mini">${item.text}</span>
        </li>
      `).join('');
    }

    function renderTradeoffs() {
      const table = document.getElementById('tradeoff-table');
      table.innerHTML = [
        { dim: 'Cost vs coverage', obs: '₦171.8B yields 89% coverage; +₦8–10B could lift to ~92%.', impact: 'Approve uplift or hold budget.' },
        { dim: 'Speed vs resilience', obs: 'Urban speed strong; resilience weaker in Sahel/coastal sites.', impact: 'Shift 5–7% budget to redundancy.' },
        { dim: 'Time vs budget', obs: '14-month plan; faster delivery needs ~+₦6B for parallel crews.', impact: 'Accept 14 months or pay for acceleration.' }
      ].map(row => `<tr><td>${row.dim}</td><td>${row.obs}</td><td>${row.impact}</td></tr>`).join('');
    }

    function renderCompliance() {
      const { national_coverage, predicted_total_cost, predicted_total_completion_months } = dataset.nigeria_total_connectivity;
      const coverageOk = national_coverage >= 85;
      const budgetOk = predicted_total_cost <= 180;
      const timeOk = predicted_total_completion_months <= 15;
      document.getElementById('compliance-coverage').textContent = coverageOk ? 'Yes' : 'No';
      document.getElementById('compliance-budget').textContent = budgetOk ? 'Yes' : 'No';
      document.getElementById('compliance-budget-note').textContent = budgetOk ? 'Within ₦180B ceiling.' : 'Exceeds ₦180B ceiling.';
      document.getElementById('compliance-time').textContent = timeOk ? 'Yes' : 'No';
      document.getElementById('compliance-time-note').textContent = timeOk ? '≤15 months' : 'Above acceptable timeline.';
      setTone('compliance-coverage', coverageOk ? 'tone-good' : 'tone-bad');
      setTone('compliance-budget', budgetOk ? 'tone-good' : 'tone-bad');
      setTone('compliance-time', timeOk ? 'tone-good' : 'tone-bad');
    }

    function renderAI() {
      const aiSummary = document.getElementById('ai-summary');
      aiSummary.textContent =
        'Design meets national coverage targets with strong urban speed. Costs trend high but stay near the ₦180B guardrail; resilience depends on shoring up Kano backhaul and Port Harcourt coastal routes. Alternatives with lower spend were rejected for sacrificing coverage gains; acceleration paths need ~+₦6B to trim timeline. Assumes steady permits and secure Sahel corridors.';
    }

    function renderAll() {
      renderScores();
      renderKPIs();
      renderImpact();
      renderRisks();
      renderTradeoffs();
      renderCompliance();
      renderAI();
    }

    renderAll();
  </script>
</body>
</html>
